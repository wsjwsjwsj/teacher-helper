<!DOCTYPE html>
<html class="js cssanimations">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="">
	<meta name="keywords" content="">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
	<title>学生信息</title>
	<link rel="stylesheet" href="amazeui.min.css">
	<link rel="stylesheet" href="pkunews.css">
	<script src="jquery.min.js"></script>
	<script src="amazeui.min.js"></script>
	<script src="handlebars.min.js"></script>
</head>
<body>
	<div class="pkunews_main">
		<div id="loading" class="loading" style="display: none;">
			<span></span>
	        <span></span>
	        <span></span>
	        <span></span>
	        <span></span>
		</div>
		<div class="pkunews_head">
			<header data-am-widget="header" class="am-header am-header-red pkunews_head_block am-no-layout">
				<div style="text-align:center;color:#fff;font-family:Georgia;font-size:18px;font-weight:bold;">学生信息</div>
			</header>
		</div>
		<div class="pkunews_content" style="background-color:#fff;">
			<div class="am-panel-group">
				<div class="am-panel am-panel-default">
					<div class="am-panel-hd">&nbsp;&nbsp;<strong>选择学生年级</strong></div>    		
					<div class="am-panel-bd">
						<table class="am-table am-table-bordered am-table-striped am-table-centered am-table-compact ">
							<tbody>
								<tr>
									<td rowspan="5"><strong>年级</strong></td>
									<td id="1" abbr="02"  width="25%" onclick="changeAddrStyle(this)">2002</td>
									<td id="2" abbr="03" width="25%" onclick="changeAddrStyle(this)">2003</td>
									<td id="3" abbr="04" width="25%" onclick="changeAddrStyle(this)">2004</td>
								</tr>
								<tr>
									<td id="4" abbr="05" width="25%" onclick="changeAddrStyle(this)">2005</td>
									<td id="5" abbr="06" width="25%" onclick="changeAddrStyle(this)">2006</td>
									<td id="6" abbr="07" width="25%" onclick="changeAddrStyle(this)">2007</td>
								</tr>
								<tr>
									<td id="7" abbr="08" width="25%" onclick="changeAddrStyle(this)">2008</td>
									<td id="8" abbr="09" width="25%" onclick="changeAddrStyle(this)">2009</td>
									<td id="9" abbr="10" width="25%" onclick="changeAddrStyle(this)">2010</td>
								</tr>
								<tr>
									<td id="10" abbr="11" width="25%" onclick="changeAddrStyle(this)" >2011</td>
									<td id="11" abbr="12" width="25%" onclick="changeAddrStyle(this)" >2012</td>
									<td id="12" abbr="13" width="25%" onclick="changeAddrStyle(this)">2013</td>
								</tr>
								<tr>
									<td id="13" abbr="14" width="25%" onclick="changeAddrStyle(this)" >2014</td>
									<td id="14" abbr="15" width="25%" onclick="changeAddrStyle(this)" >2015</td>
									<td id="15" abbr="16" class="am-primary" width="25%" onclick="changeAddrStyle(this)">2016</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="am-panel am-panel-default">
					<div class="am-panel-hd">&nbsp;&nbsp;<strong><span id="yearTitle">2016级的学生</span></strong></div>  

					<div class="am-panel-bd" id="studentList">
						<table class="am-table">
							<thead>
				    			<tr>
				    				<th width="45%"><small>学号</small></th>
				    				<th width="45%"><small>姓名</small></th>
					           		<tbody id="studentInfo">
					                </tbody>
					       		</tr>
				    		</thead>
						</table>
					</div>

				</div>
                          


			</div>	
		</div>
	</div>

	<script type="text/javascript">
		var year = '16';
		function changeAddrStyle(obj){
			year = obj.abbr;
			$("table tr td").each(function(index){
				if(index>0&&index<=20){
					if(index==parseInt(obj.id)){   
		                $(this).addClass("am-primary");  
		            }else{  
		                $(this).removeClass("am-primary");    
		            }
				}
	        });
			$("#yearTitle").html("20"+year+"级的学生");
			retrSocores();
	    };

		function retrSocores() {

			var $studentList = $('#studentList');

			$studentList.hide();
			
			$('#loading').show();
		//	$.ajax({ 
		//		type: 'get', 
		//		url: '/wechat/ctrl/score/retrScores.do', 
		//		ContentType: "application/json; charset=utf-8",
        //    	dataType: "json",
		//		success: function(data) { 
		//			var success = data.success;
		//			if(true==success){
			var data = [
				{
				  xh:1,
                  xm:"www",
                  sx:100,
                  kt:1,
                  db:1,
                  zx:123
                
                 },
                {
				  xh:2,
                  xm:"sss",
                  sx:10,
                  kt:2,
                  db:2,
                  zx:3
                
                 }
			];
						$('#loading').hide();
					        if(true){
							$studentList.show();
                            
							var sb = "";
							$.each(data, function(i, item) {
								console.log(item);
								sb += "<tr>";
								sb += "<td><a style=\"color:#000000;\" onclick=\"showDetail('" + item.xh + "')\">" + item.xh + "</a></td>";
								sb += "<td><a style=\"color:#000000;\" onclick=\"showDetail('" + item.xh + "')\">" + item.xm +"</a></td>";
								sb += "<td><a id=\"detailBtn_"+ item.xh +"\" class=\"am-icon-chevron-down\" style=\"color:#8c0000;\" onclick=\"showDetail('" + item.xh + "')\"></a></td>";
								sb += "</tr>";
								sb += "<tr>";
								sb += "<td colspan=4 id=\"xh_"+item.xh+"\" style=\"display:none;\">";
								sb += "<div class=\"am-panel-bd\">";
								sb += "<div class=\"am-gallery-desc\"><label><small>是否实习</small></label>&nbsp;&nbsp;<span><small>"+item.sx + "</small></span></div>";
								sb += "<div class=\"am-gallery-desc\"><label><small>是否开题</small></label>&nbsp;&nbsp;<span><small>"+item.kt + "</small></span></div>";
								sb += "<div class=\"am-gallery-desc\"><label><small>答辩状态</small></label>&nbsp;&nbsp;<span><small>"+item.db +"</small></span></div>";
								sb += "<div class=\"am-gallery-desc\"><label><small>是否在校生</small></label>&nbsp;&nbsp;<span><small>"+item.zx +"</small></span></div>";				
								sb += "</td>";
								sb += "</tr>";
							});
							var $studentInfo = $('#studentInfo');
							$studentInfo.html(sb);
						}else{
						$('#loading').hide();
						var errMsg = data.msg||data.message||data.errorMsg;
						$studentList.hide();
						$('#errMsg').html(errMsg);
					}
			//	},
			//	error:function(XMLHttpRequest, textStatus, errorThrown){
			//		$('#loading').hide();
			//		$yjscj.hide();
			//		$('#errMsg').html(errorThrown);
			//	}
		//	}); 
		};
		
		function showDetail(id){
			var $clickedBtn = $("#detailBtn_"+id);
			var $detailInfo = document.getElementById("xh_"+id);	
			if("none"==$detailInfo.style.display){
				$clickedBtn.attr("class","am-icon-chevron-up");
				$detailInfo.style.display="";
			}else{
				$clickedBtn.attr("class","am-icon-chevron-down");
				$detailInfo.style.display="none";
			}
		}
		
		$(function() {
			retrSocores();
		});
	</script>
</body></html>